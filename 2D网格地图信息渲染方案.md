# 世界地图渲染

## 渲染数据说明

* 数据存储精度 5 - 进制单位为 50
  * 可调整为 1 (最小值), 进制单位为 255

### 数据纹理0

* 尺寸 2048 * 2048
  * 每个像素对应一个Land
* 像素数据
  * 存储该Land渲染时使用的纹理的 Cell 信息
  * R 存储 Cell 信息 中 Col 的 50 进制的余数
  * G 存储 Cell 信息 中 Row 的 50 进制的余数
  * B 存储 Cell 信息 中 Col 的 50 进制的倍数
  * A 存储 Cell 信息 中 Row 的 50 进制的倍数
* 可表达的坐标范围
  * 行、列: [0 , 50 * 50 + 50] = [0 , 2550]
  * 设计应用到多级纹理:
    * 0 级纹理范围:
      * 列: [0, 1023]
      * 行: [0, 1023]
    * 1 级纹理范围:
      * 列: [1100, 1163]
      * 行: [0, 63]
    * 2 级纹理范围:
      * 列: [1200, 1215]
      * 行: [0, 15]

### 数据纹理1

* 可表达的坐标范围
  * 行、列: [0 , 50 * 50 + 50] = [0 , 2550]
* 记录 当前 Land 所属 合并地块 的起点 - 终点范围

#### A

* 尺寸 2048 * 2048
  * 每个像素对应一个Land
* 像素数据
  * 存储该 Land 渲染时, 所属渲染矩形的 终点 行列信息
  * R 存储 所属矩形 起始 Col 的 50 进制的余数
  * G 存储 所属矩形 起始 Row 的 50 进制的余数
  * B 存储 所属矩形 起始 Col 的 50 进制的倍数
  * A 存储 所属矩形 起始 Row 的 50 进制的倍数

#### B

* 尺寸 2048 * 2048
  * 每个像素对应一个Land
* 像素数据
  * 存储该 Land 渲染时, 所属渲染矩形的 起点 行列信息
  * R 存储 所属矩形 结束 Col 的 50 进制的余数
  * G 存储 所属矩形 结束 Row 的 50 进制的余数
  * B 存储 所属矩形 结束 Col 的 50 进制的倍数
  * A 存储 所属矩形 结束 Row 的 50 进制的倍数


### 渲染纹理0 - RGB

* 尺寸 1024 * 1024
  * 每个像素对应一个颜色值, 每个颜色值可以对应一个用户
  * 共 1024*1024 = 1048576 个颜色位置
    * 第 0 - 9 预留给非用户数据
      * 0 - 虚空地块色
      * 1 - 地图范围边界色
    * 对 尺寸 在 8 * 8 以下 范围的 地块/合并地块 使用 - (实际范围可修改)
* 像素数据
  * RGB 存储 用户的Land对应在地图上的渲染颜色

### 渲染纹理1 - RGB

* 尺寸 2048 * 2048
  * 每 32 * 32 范围 存储一个用户图标(小)
  * 共 64*64 = 4096 个图标位置
    * 对 尺寸 在 8 * 8 到 64 * 64 范围的合并地块使用 - (实际范围可修改)
* 像素数据
  * 32 * 32 范围 存储 用户的 Land(合并后) 对应在地图上的渲染图标

### 渲染纹理2 - RGB

* 尺寸 2048 * 2048
  * 每 128 * 128 范围 存储一个用户图标(大)
  * 共 16*16 = 256 个图标位置
    * 对 尺寸 在 64 * 64 以上范围的合并地块使用 - (实际范围可修改)
* 像素数据
  * 128 * 128 范围 存储 用户的 Land(合并后) 对应在地图上的渲染图标

## 应用预期

### 只使用用户颜色信息,不使用图标信息

* 需要数据 - 16 + 12 = 28M
  * 数据纹理0 - 16M
  * 渲染纹理0 - 12M

### 使用用户图标信息

* 需要数据 - 48 + 36 = 84M
  * 数据纹理0 - 16M
  * 数据纹理1 A - 16M
  * 数据纹理1 B - 16M
  * 渲染纹理0 - 12M
  * 渲染纹理1 - 12M
  * 渲染纹理2 - 12M

### 参考网格渲染模式

#### 网格数据

* N 个合并地块
  * 每地块 4 个顶点(浮点), 4个 UV(浮点), 2个三角形(整数)
* 参考最大值 1024 * 1024 个地块
  * 数据量
    * 1024 * 1024 * (4 * 4 + 4 * 4 + 2 * 3 * 2)
      * 44 M
      * 需要切分为 64 个模型
* 参考中间值 1024 * 512 个地块
  * 数据量
    * 1024 * 512 * (4 * 4 + 4 * 4 + 2 * 3 * 2)
      * 22 M
      * 需要切分为 32 个模型
* 参考最小值 256 * 128 个地块
  * 数据量
    * 256 * 128 * (4 * 4 + 4 * 4 + 2 * 3 * 2)
      * 1.375 M
      * 需要切分为 2 个模型

#### 纹理数据

* 与像素渲染模式相同